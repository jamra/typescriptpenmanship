{"version":3,"sources":["webpack:///webpack/bootstrap 2da0a95ef9f3bf506584","webpack:///./main.ts","webpack:///./ts/signature.ts","webpack:///./ts/point.ts"],"names":[],"mappings":"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","file":"./js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"../\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2da0a95ef9f3bf506584\n **/","import {Signature} from './ts/signature';\r\n\r\nvar canvas: HTMLCanvasElement;\r\nlet sign : Signature;\r\n\r\nwindow.onload = () => {\r\n   canvas = <HTMLCanvasElement>document.getElementById('canvas');\r\n   sign = new Signature( canvas );\r\n  };\r\n\r\nlet genImage = () => {\r\n    var dataURL = canvas.toDataURL();\r\n\r\n    // var img : HTMLImageElement = <HTMLImageElement>document.getElementById(\"snapshot\");\r\n    // img.style.border = \"2px solid\";\r\n    // img.src = dataURL;\r\n    // img.setAttribute(\"style\", \"display: none;\");\r\n};\r\n\r\nwindow['genImage'] = genImage;\n\n\n/** WEBPACK FOOTER **\n ** ./main.ts\n **/","import { Point } from './point';\r\n\r\nclass Signature {\r\n    points: Array<Point> = new Array<Point>();\r\n    _isDrawing: boolean = false;\r\n    ctx: CanvasRenderingContext2D;\r\n\r\n    constructor(public canvas: HTMLCanvasElement, {bgColor=\"#EEE\"} = {}) {\r\n        this.ctx = canvas.getContext(\"2d\");\r\n\r\n        this.ctx.fillStyle = bgColor;\r\n        this.ctx.fillRect(0, 0, canvas.clientWidth, canvas.clientHeight);\r\n\r\n        canvas.addEventListener(\"mousemove\", (e : MouseEvent) => this.move( e.clientX, e.clientY, e.timeStamp ), false);\r\n        canvas.addEventListener(\"touchmove\", (e : TouchEvent) => {\r\n            let touch : Touch = e.touches.item(0);\r\n            this.move( touch.clientX, touch.clientY, e.timeStamp );\r\n        }, false);\r\n\r\n\r\n        canvas.addEventListener(\"mousedown\", (e : MouseEvent) => this.start( e.clientX, e.clientY, e.timeStamp ), false); \r\n        canvas.addEventListener(\"touchdown\", (e : TouchEvent) => {\r\n            let touch : Touch = e.touches.item(0);\r\n            this.move( touch.clientX, touch.clientY, e.timeStamp );\r\n        }, false);\r\n\r\n\r\n        let leave = (e : MouseEvent) => this.stop();\r\n        canvas.addEventListener(\"mouseup\", leave, false);\r\n        canvas.addEventListener(\"mouseout\", leave, false);\r\n        canvas.addEventListener(\"touchend\", leave, false);\r\n    }\r\n\r\n    start(x: number, y: number, timeStamp: number) {\r\n        let curr = new Point(\r\n            x - this.canvas.offsetLeft,\r\n            y - this.canvas.offsetTop,\r\n            timeStamp,\r\n            0\r\n        );\r\n\r\n        this.points.push(curr);\r\n        this._isDrawing = true;\r\n    }\r\n\r\n    stop() {\r\n        this._isDrawing = false;\r\n        this.points = new Array<Point>();\r\n    }\r\n\r\n    move(x: number, y: number, timeStamp: number) {\r\n        if (this._isDrawing) {\r\n            let curr = new Point(\r\n                x - this.canvas.offsetLeft,\r\n                y - this.canvas.offsetTop,\r\n                timeStamp,\r\n                0\r\n            );\r\n\r\n            this.points.push(curr);\r\n\r\n            if (this.points.length > 2) {\r\n                //Optimization borrowed from https://github.com/szimek/signature_pad/blob/master/signature_pad.js\r\n                if (this.points.length === 3)  {\r\n                    this.points.unshift(this.getFirst());\r\n                }\r\n\r\n                let vel = Math.abs( curr.velocityFrom(this.getPrev()) );\r\n                let strokeWidth =  Math.max( 5.0 / (vel + 1), 2 );\r\n\r\n                this.draw( strokeWidth );\r\n\r\n                this.points.shift();\r\n            }\r\n        }\r\n    }\r\n\r\n    draw(strokeWidth: number) {\r\n        //TODO: Use cubic bezier for smoothe curves\r\n        let ctx = this.ctx;\r\n        let points = this.points;\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(points[2].x, points[2].y);\r\n        ctx.lineTo(points[3].x, points[3].y);\r\n        ctx.strokeStyle = \"#333\";\r\n        ctx.lineWidth = strokeWidth;\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n    }\r\n\r\n    getCurr = () => this.points[this.points.length - 1];\r\n    getPrev = () => this.points[this.points.length - 2];\r\n    getFirst = () => this.points[0];\r\n   \r\n    getImageUrl() {\r\n        return this.canvas.toDataURL();\r\n    }\r\n};\r\n\r\nexport {\r\n    Signature\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./ts/signature.ts\n **/","\r\nconst VELOCITY_FILTER_WEIGHT : number = 0.7;\r\n\r\n\r\nclass Point {\r\n    constructor(public x: number, public y:number, public timeStamp?:number, public v?:number){}\r\n\r\n    distanceFrom(p2: Point) {\r\n        return Math.sqrt( (this.x - p2.x) * (this.x - p2.x) + (this.y - p2.y) * (this.y - p2.y) ); \r\n    }\r\n    velocityFrom(last: Point) {\r\n        this.v = this.distanceFrom(last) / (this.timeStamp - last.timeStamp);\r\n\r\n        this.v = VELOCITY_FILTER_WEIGHT * this.v + (1 - VELOCITY_FILTER_WEIGHT) * last.v;\r\n        return this.v;\r\n    };\r\n};\r\n\r\nexport {\r\n    Point\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./ts/point.ts\n **/"],"sourceRoot":""}